# Production Caddyfile for Impious (runs inside docker-compose caddy service).
# Static lore/marketing site lives at /srv/site (bind-mounted from ../site/public).
# Caddy handles TLS automatically; do not hard-code certificates here.

impious.io {
    root * /srv/site
    encode zstd gzip
    try_files {path} {path}/ /index.html
    file_server
}

www.impious.io {
    redir https://impious.io{uri}
}

game.impious.io {
    reverse_proxy game-api:3000
}

# Add codex service here, route codex.imperiumsolis.com { root * /srv/codex }
